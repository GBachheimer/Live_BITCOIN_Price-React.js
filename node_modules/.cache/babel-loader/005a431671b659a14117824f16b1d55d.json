{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/GitHub/BITCOIN-Graph/src/components/HandleData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport useWebSocket from 'react-use-websocket';\nimport Graph from \"./Graph\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst bitcoinSocket = new WebSocket(\"wss://stream.binance.com:9443/ws/btcusdt@kline_1m\");\nexport default function HandleData() {\n  _s();\n\n  const [graphData, setGraphData] = useState([]);\n  const [min, setMin] = useState(Infinity);\n  const [max, setMax] = useState(0);\n  const [title, setTitle] = useState(\"LIVE BITCOIN PRICE IN $$$\");\n  bitcoinSocket.addEventListener(\"message\", event => {\n    const newPrice = parseFloat(JSON.parse(event.data).k.c);\n    const time = new Date(parseInt(JSON.parse(event.data).k.T));\n    const newData = graphData.concat({\n      price: newPrice,\n      time: time.getHours() + \":\" + ((time.getMinutes() < 10 ? \"0\" : \"\") + time.getMinutes()) + \" \" + time.toLocaleDateString()\n    });\n\n    if (min > newPrice) {\n      setMin(newPrice);\n    } else if (max < newPrice) {\n      setMax(newPrice);\n    }\n\n    if (newData.length - 1 > 20) {\n      newData.shift();\n    }\n\n    setGraphData(newData);\n  });\n  console.log(graphData);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"position-absolute top-50 start-50 translate-middle text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Graph, {\n      graphData: graphData,\n      min: min,\n      max: max\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 3\n  }, this);\n}\n\n_s(HandleData, \"1lnUFviPoVPpOf0xgKC0Evj7C+k=\");\n\n_c = HandleData;\n\nvar _c;\n\n$RefreshReg$(_c, \"HandleData\");","map":{"version":3,"names":["React","useState","useWebSocket","Graph","bitcoinSocket","WebSocket","HandleData","graphData","setGraphData","min","setMin","Infinity","max","setMax","title","setTitle","addEventListener","event","newPrice","parseFloat","JSON","parse","data","k","c","time","Date","parseInt","T","newData","concat","price","getHours","getMinutes","toLocaleDateString","length","shift","console","log"],"sources":["/Users/mac/Documents/GitHub/BITCOIN-Graph/src/components/HandleData.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport useWebSocket from 'react-use-websocket';\nimport Graph from \"./Graph\";\n\nconst bitcoinSocket = new WebSocket(\"wss://stream.binance.com:9443/ws/btcusdt@kline_1m\");\n\nexport default function HandleData() {\n\tconst [graphData, setGraphData] = useState([]);\n\tconst [min, setMin] = useState(Infinity);\n\tconst [max, setMax] = useState(0);\n\tconst [title, setTitle] = useState(\"LIVE BITCOIN PRICE IN $$$\");\n\t\n\tbitcoinSocket.addEventListener(\"message\", (event) => {\n\t\tconst newPrice = parseFloat(JSON.parse(event.data).k.c);\n\t\tconst time = new Date(parseInt(JSON.parse(event.data).k.T));\n\t\tconst newData = graphData.concat({\n\t\t\tprice: newPrice,\n\t\t\ttime: \ttime.getHours() + \":\" +\n\t\t\t\t\t((time.getMinutes() < 10 ? \"0\" : \"\") + time.getMinutes()) + \" \" +\n\t\t\t\t\ttime.toLocaleDateString()\n\t\t});\n\t\t\n\t\tif (min > newPrice) {\n\t\t\tsetMin(newPrice);\n\t\t} else if (max < newPrice) {\n\t\t\tsetMax(newPrice);\n\t\t}\n\t\tif (newData.length - 1 > 20) {\n\t\t\tnewData.shift();\n\t\t}\n\t\tsetGraphData(newData);\n\t});\n\tconsole.log(graphData);\n\treturn (\n\t\t<div className = \"position-absolute top-50 start-50 translate-middle text-center\">\n\t\t\t<p>{title}</p>\n\t\t\t<Graph graphData = {graphData} min = {min} max = {max} />\n\t\t</div>\n\t);\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,YAAP,MAAyB,qBAAzB;AACA,OAAOC,KAAP,MAAkB,SAAlB;;AAEA,MAAMC,aAAa,GAAG,IAAIC,SAAJ,CAAc,mDAAd,CAAtB;AAEA,eAAe,SAASC,UAAT,GAAsB;EAAA;;EACpC,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACQ,GAAD,EAAMC,MAAN,IAAgBT,QAAQ,CAACU,QAAD,CAA9B;EACA,MAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBZ,QAAQ,CAAC,CAAD,CAA9B;EACA,MAAM,CAACa,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC,2BAAD,CAAlC;EAEAG,aAAa,CAACY,gBAAd,CAA+B,SAA/B,EAA2CC,KAAD,IAAW;IACpD,MAAMC,QAAQ,GAAGC,UAAU,CAACC,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACK,IAAjB,EAAuBC,CAAvB,CAAyBC,CAA1B,CAA3B;IACA,MAAMC,IAAI,GAAG,IAAIC,IAAJ,CAASC,QAAQ,CAACP,IAAI,CAACC,KAAL,CAAWJ,KAAK,CAACK,IAAjB,EAAuBC,CAAvB,CAAyBK,CAA1B,CAAjB,CAAb;IACA,MAAMC,OAAO,GAAGtB,SAAS,CAACuB,MAAV,CAAiB;MAChCC,KAAK,EAAEb,QADyB;MAEhCO,IAAI,EAAGA,IAAI,CAACO,QAAL,KAAkB,GAAlB,IACJ,CAACP,IAAI,CAACQ,UAAL,KAAoB,EAApB,GAAyB,GAAzB,GAA+B,EAAhC,IAAsCR,IAAI,CAACQ,UAAL,EADlC,IACuD,GADvD,GAELR,IAAI,CAACS,kBAAL;IAJ8B,CAAjB,CAAhB;;IAOA,IAAIzB,GAAG,GAAGS,QAAV,EAAoB;MACnBR,MAAM,CAACQ,QAAD,CAAN;IACA,CAFD,MAEO,IAAIN,GAAG,GAAGM,QAAV,EAAoB;MAC1BL,MAAM,CAACK,QAAD,CAAN;IACA;;IACD,IAAIW,OAAO,CAACM,MAAR,GAAiB,CAAjB,GAAqB,EAAzB,EAA6B;MAC5BN,OAAO,CAACO,KAAR;IACA;;IACD5B,YAAY,CAACqB,OAAD,CAAZ;EACA,CAnBD;EAoBAQ,OAAO,CAACC,GAAR,CAAY/B,SAAZ;EACA,oBACC;IAAK,SAAS,EAAG,gEAAjB;IAAA,wBACC;MAAA,UAAIO;IAAJ;MAAA;MAAA;MAAA;IAAA,QADD,eAEC,QAAC,KAAD;MAAO,SAAS,EAAIP,SAApB;MAA+B,GAAG,EAAIE,GAAtC;MAA2C,GAAG,EAAIG;IAAlD;MAAA;MAAA;MAAA;IAAA,QAFD;EAAA;IAAA;IAAA;IAAA;EAAA,QADD;AAMA;;GAjCuBN,U;;KAAAA,U"},"metadata":{},"sourceType":"module"}